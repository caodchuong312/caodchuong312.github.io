name: Deploy to GitHub Pages  

on:  
  push:  
    branches: [ main ]  
  workflow_dispatch:  

permissions:  
  contents: read  
  pages: write  
  id-token: write  

jobs:  
  build:  
    runs-on: ubuntu-latest  
    steps:  
      - name: Checkout your repository  
        uses: actions/checkout@v4  
        
      - name: Install, build, and upload your site  
        uses: withastro/action@v3  
        with:  
          # Specify the package manager without version  
          package-manager: pnpm  
          # Optional: Uncomment if you need to specify anything else  
          # path: . # The root location of your Astro project (if not root)  
          # node-version: 20 # Specify Node.js version if necessary  

  deploy:  
    needs: build  
    runs-on: ubuntu-latest  
    environment:  
      name: github-pages  
      url: ${{ steps.deployment.outputs.page_url }}  
    steps:  
      - name: Deploy to GitHub Pages  
        id: deployment  
        uses: actions/deploy-pages@v4  
        with:  
          publish_dir: ./dist  # Replace with your actual output directory
